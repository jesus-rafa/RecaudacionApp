{% extends 'base.html' %}
{% load static %}
{% load tags %}
{% load humanize %}
{% load l10n %}

{% block title %} Autorización {% endblock title %}

{% block content %}
<div class="page-title">
    <div class="row">
        <div class="col-sm-6">
            <h4 class="mb-0">Autorización</h4>
            {{permission}}
        </div>
        <div class="col-sm-6">
            <ol class="breadcrumb pt-0 pr-0 float-left float-sm-right ">
                <!-- <button id="btPublish"
                    class="btn btn-primary" target="_blank">
                    <i class="fa fa-paper-plane"></i> Publicar
                </button> -->
                &nbsp;
                {% if permission == 'EJECUTIVO ANALISIS' %}
                <button id="btNew" onclick="Add_Modal('{% url 'programacion_app:alta-contribuyente' %}')" class="btn btn-primary"
                    target="_blank">
                    <i class="fa fa-user-circle-o"></i> Agregar Contribuyente
                </button>
                {% endif %}
            </ol>
        </div>
    </div>
</div>

	 
 
<div class="row">
    <div class="col-xl-12 mb-30">

        <div class="card card-statistics h-100">
            <div class="card-body">
                <div class="tab round shadow">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active show" id="home-20-tab" data-toggle="tab" href="#home-20"
                                role="tab" aria-controls="home-20" aria-selected="true"> <i class="fa fa-files-o"></i>
                                Propuestas </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="profile-30-tab" data-toggle="tab" href="#profile-30" role="tab"
                                aria-controls="profile-30" aria-selected="false"><i class="fa fa-eye"></i> Revision
                            </a>
                        </li>
						{% if permission == 'COORDINACION VIGILANCIA' %}
						<li class="nav-item">
                            <a class="nav-link" id="profile-40-tab" data-toggle="tab" href="#profile-40" role="tab"
                                aria-controls="profile-40" aria-selected="false"><i class="fa fa-exclamation-triangle"></i> Por Cerrar
                            </a>
                        </li>
						<li class="nav-item">
                            <a class="nav-link" id="profile-80-tab" data-toggle="tab" href="#profile-80" role="tab"
                                aria-controls="profile-80" aria-selected="false"><i class="fa fa-exclamation-triangle"></i> Solicitar Apoyo
                            </a>
                        </li>
						<li class="nav-item">
                            <a class="nav-link" id="profile-50-tab" data-toggle="tab" href="#profile-50" role="tab"
                                aria-controls="profile-50" aria-selected="false"><i class="fa fa-random"></i> Reasignar Oficio
                            </a>
                        </li>
						{% endif %}
						 <!-- <li class="nav-item"> -->
                            <!-- <a class="nav-link" id="profile-60-tab" data-toggle="tab" href="#profile-60" role="tab" -->
                                <!-- aria-controls="profile-60" aria-selected="false"><i class="fa fa-minus-square-o"></i> Informativas -->
                            <!-- </a> -->
                        <!-- </li> -->
						 <li class="nav-item">
                            <a class="nav-link" id="profile-70-tab" data-toggle="tab" href="#profile-70" role="tab"
                                aria-controls="profile-70" aria-selected="false"><i class="fa fa-minus-square"></i> Canceladas
                            </a>
                        </li>
						
                        <!-- <li class="nav-item"> -->
                        <!-- <a class="nav-link" id="portfolio-08-tab" data-toggle="tab" href="#portfolio-08" role="tab" -->
                        <!-- aria-controls="portfolio-08" aria-selected="false"><i class="fa fa-vcard-o"></i> Accesos -->
                        <!-- </a> -->
                        <!-- </li> -->

                    </ul>
                    {% if messages %}
                    {% for message in messages %}
                    <div class="text-center alert alert-success alert-dismissible fade show -{{ message.tags }}">
                        {{ message|safe }}
                    </div>
                    {% endfor %}
                    {% endif %}

                    <div class="tab-content">
                        <div class="tab-pane fade active show" id="home-20" role="tabpanel"
                            aria-labelledby="home-20-tab">
							<br>
							{% if permission == 'DIRECTOR' %}
								<div class="text-center">
									Ultimo Folio: {% for data in last_folio %}<strong class="text-primary">{{ data.folio }}</strong>&nbsp;&nbsp;&nbsp;RFC: <strong class="text-primary">{{ data.rfc }}</strong>{% endfor %}
								</div>
							{% endif %}
                            <div class="table-responsive">
                                <table id="datatable1" class="table table-striped table-bordered p-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>
                                    <input type="checkbox" name="select_all" value="1" id="example-select-all">
                                </th> -->
                                            <th>Oficio</th>
                                            <th>RFC</th>
                                            <th>Nombre</th>
											
                                            <th>Programa</th>
                                            <th>Fecha Creación</th>
                                            <th>Etapa</th>
                                            <th>Detalle</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for programa in programacion %}
                                        <tr>
                                            <!-- <td> {{ programa.id}} </td> -->
                                            <td>
                                                {% if programa.estatus == 'OFICIO' %}
                                                {{ programa.folio }}
                                                {% else %}
                                                {{ programa.id }}
                                                {% endif %}
                                            </td>
                                            <td>{{ programa.rfc }}</td>
                                            <td>{{ programa.nombre }}</td>
											
                                            <td>{{ programa.programa }}</td>
                                            <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td>
                                            <td>
                                                {% if programa.estatus == '1-RECHAZADA' or programa.estatus == '2-RECHAZADA' or programa.estatus == '3-RECHAZADA'%}
													RECHAZADA
												{% else %}
													{{ programa.estatus }}
												{% endif %}
                                            </td>
                                            <td>
												<div>
                                                {% if permission == 'EJECUTIVO ANALISIS' %}
												{% if programa.estatus == 'NUEVO' or programa.estatus == '1-RECHAZADA' %}
                                                <button id="btPublish"
                                                    onclick="Publish_Modal('{% url 'programacion_app:asignar' %}', '{{ programa.id }}', '{{ programa.estatus }}', '{{programa.folio}}', 0, '{{programa.rfc}}');"
                                                    data-toggle="tooltip" data-placement="top" title="Publicar"
                                                    class="btn btn-primary btn-sm" target="_blank"><i
                                                        class="fa fa-paper-plane"></i>
                                                </button>
												
                                                {% endif %}
												
                                                <button id="btUpdate"
                                                    onclick="Update_Modal('{% url 'programacion_app:editar-contribuyente' programa.id %}')"
                                                    data-toggle="tooltip" data-placement="top" title="Editar"
                                                    class="btn btn-warning btn-sm" target="_blank"><i
                                                        class="fa fa-pencil"></i>
                                                </button>

                                                <button id="btFile"
                                                    onclick="Files_Modal('{% url 'programacion_app:alta-archivos' programa.id %}', '{{ programa.id }}', '{{ programa.id }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Cargar Archivo"
                                                    class="btn btn-primary btn-sm" target="_blank">
                                                    <i class="ti-file"></i>
                                                </button>
												
                                                {% elif permission == 'COORDINACION PROGRAMACION' %}
                                                <button id="btCancel"
                                                    onclick="Cancel_Modal('{% url 'programacion_app:alta-detalle' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Rechazar"
                                                    class="btn btn-warning btn-sm" target="_blank">
                                                    <i class="fa fa-mail-reply"></i>
                                                </button>
												
												<button id="btPublish"
                                                    onclick="Publish_Modal('{% url 'programacion_app:asignar' %}', '{{ programa.id }}', '{{ programa.estatus }}', '{{programa.folio}}', 0, '{{programa.rfc}}');"
                                                    data-toggle="tooltip" data-placement="top" title="Publicar"
                                                    class="btn btn-primary btn-sm" target="_blank"><i
                                                        class="fa fa-paper-plane"></i>
                                                </button>
                                                {% elif permission == 'COORDINACION VIGILANCIA' %}
                                                {% if programa.estatus == 'FAFD' or programa.estatus == '3-RECHAZADA' %}
                                                <button id="btCancel"
                                                    onclick="Cancel_Modal('{% url 'programacion_app:alta-detalle' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Rechazar"
                                                    class="btn btn-warning btn-sm" target="_blank">
                                                    <i class="fa fa-mail-reply"></i>
                                                </button>
												
												<button id="btPublish"
                                                    onclick="Publish_Modal('{% url 'programacion_app:asignar' %}', '{{ programa.id }}', '{{ programa.estatus }}', '{{programa.folio}}', 0, '{{programa.rfc}}');"
                                                    data-toggle="tooltip" data-placement="top" title="Publicar"
                                                    class="btn btn-primary btn-sm" target="_blank"><i
                                                        class="fa fa-paper-plane"></i>
                                                </button>
												{% else %}
													<button id="btPublish"
                                                    onclick="Publish_Modal('{% url 'programacion_app:asignar' %}', '{{ programa.id }}', '{{ programa.estatus }}', '{{programa.folio}}', 0, '{{programa.rfc}}');"
                                                    data-toggle="tooltip" data-placement="top" title="Publicar"
                                                    class="btn btn-primary btn-sm" target="_blank"><i
                                                        class="fa fa-paper-plane"></i>
                                                </button>
                                                {% endif %}

                                                {% elif permission == 'DIRECTOR' %}
                                                <button id="btCancel"
                                                    onclick="Cancel_Modal('{% url 'programacion_app:alta-detalle' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Rechazar"
                                                    class="btn btn-warning btn-sm" target="_blank">
                                                    <i class="fa fa-mail-reply"></i>
                                                </button>
												
												<button id="btPublish"
                                                    onclick="Publish_Modal('{% url 'programacion_app:asignar' %}', '{{ programa.id }}', '{{ programa.estatus }}', '{{programa.folio}}', 0, '{{programa.rfc}}');"
                                                    data-toggle="tooltip" data-placement="top" title="Publicar"
                                                    class="btn btn-primary btn-sm" target="_blank"><i
                                                        class="fa fa-paper-plane"></i>
                                                </button>
                                                {% endif %}

                                                <button id="btDetail"
                                                    onclick="View_Modal('{% url 'programacion_app:ver-autorizacion' programa.id %}')"
                                                    data-toggle="tooltip" data-placement="top" title="Detalle"
                                                    class="btn btn-warning btn-sm" target="_blank"><i
                                                        class="fa fa-list-ul"></i>
                                                </button>

                                                
												</div>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>

                                </table>
                            </div>

                        </div>

                        <div class="tab-pane fade" id="profile-30" role="tabpanel" aria-labelledby="profile-30-tab">
                            <div class="table-responsive">
                                <table id="datatable2" class="table table-striped table-bordered p-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>
                                    <input type="checkbox" name="select_all" value="1" id="example-select-all">
                                </th> -->
                                            <th>Oficio</th>
                                            <th>RFC</th>
                                            <th>Nombre</th>
                                            <th>Programa</th>
                                            <th>Fecha Creación</th>
                                            <th>Etapa</th>
											<th>Area</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for programa in revision %}
                                        <tr>
                                            <!-- <td> {{ programa.id}} </td> -->
                                            <td>
                                                {% if programa.estatus == 'OFICIO' %}
													{{ programa.folio }}
                                                {% else %}
													{{ programa.id }}
                                                {% endif %}
                                            </td>
                                            <td>{{ programa.rfc }}</td>
                                            <td>{{ programa.nombre }}</td>
                                            <td>{{ programa.programa }}</td>
                                            <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td>
                                            <td>
                                                {% if programa.estatus == '1-RECHAZADA' or programa.estatus == '2-RECHAZADA' or programa.estatus == '3-RECHAZADA'%}
													RECHAZADA
												{% else %}
													{{ programa.estatus }}
												{% endif %}
                                            </td>
											<td>
												{% if programa.estatus == 'NUEVO' or programa.estatus == '1-RECHAZADA' or programa.estatus == '2-RECHAZADA' or programa.estatus == 'PROPUESTA'%}
													PROGRAMACION
												{% elif programa.estatus == 'FAFD' or programa.estatus == '3-RECHAZADA' %}
													VIGILANCIA
												{% elif programa.estatus == 'PRESUNTIVA' %}
													DIRECCION
												{% endif %}
											</td

                                        </tr>
                                        {% endfor %}
                                    </tbody>

                                </table>
                            </div>

                        </div>
						
						<div class="tab-pane fade" id="profile-40" role="tabpanel" aria-labelledby="profile-40-tab">
                            <div class="table-responsive">
                                <table id="datatable3" class="table table-striped table-bordered p-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>
                                    <input type="checkbox" name="select_all" value="1" id="example-select-all">
                                </th> -->
                                            <th>Oficio</th>
                                            <th>RFC</th>
                                            <th>Nombre</th>
                                            <th>Programa</th>
                                            <th>Fecha Creación</th>
                                            <th>Etapa</th>
											<th>Cerrar</th>

                                        </tr>
                                    </thead>
                                   <tbody>
                                        {% for programa in por_cerrar %}
                                        <tr>
                                            <!-- <td> {{ programa.id}} </td> -->
                                            <td>
                                                {% if programa.estatus == 'PAGO TOTAL' or programa.estatus == 'PARA TRANSFERIR' or programa.estatus == 'RECHAZADO' %}
                                                {{ programa.folio }}
                                                {% else %}
                                                {{ programa.id }}
                                                {% endif %}
                                            </td>
                                            <td>{{ programa.rfc }}</td>
                                            <td>{{ programa.nombre }}</td>
                                            <td>{{ programa.programa }}</td>
                                            <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td>
                                            <td>
                                                {{ programa.estatus }}
                                            </td>
                                            <td>
                                                {% if programa.estatus == 'PARA TRANSFERIR' or programa.estatus == 'PAGO TOTAL' or programa.estatus == 'ACLARACION' %}
                                                <button id="btCancel"
                                                    onclick="Rechazar_Modal('{% url 'programacion_app:alta-detalle' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}', '{{ programa.estatus }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Rechazar" class="btn btn-warning btn-sm" target="_blank">
                                                    <i class="fa fa-mail-reply"></i>
                                                </button>
                                                {% endif %}
                                                <button id="btDetail" onclick="View_Modal('{% url 'programacion_app:ver-todo' programa.id %}')"
                                                    data-toggle="tooltip" data-placement="top" title="Detalle" class="btn btn-warning btn-sm" target="_blank"><i
                                                        class="fa fa-list-ul"></i> </button>
                                            
                                                <button id="btCerrar"
                                                    onclick="Cerrar_Modal('{% url 'programacion_app:alta-cierre' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}', '{{ programa.estatus }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Cerrar" class="btn btn-primary btn-sm" target="_blank">
                                                    <i class="fa fa-paper-plane"></i>
                                                </button>
                                            </td>

                                        </tr>
                                        {% endfor %}
                                    </tbody>

                                </table>
                            </div>

                        </div>
						
						<div class="tab-pane fade" id="profile-80" role="tabpanel" aria-labelledby="profile-80-tab">
                            <div class="table-responsive">
                                <table id="datatable8" class="table table-striped table-bordered p-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>
                                    <input type="checkbox" name="select_all" value="1" id="example-select-all">
                                </th> -->
                                            <th>Oficio</th>
                                            <th>RFC</th>
                                            <th>Nombre</th>
                                            <th>Programa</th>
                                            <th>Fecha Creación</th>
                                            <th>Etapa</th>
											<th>Solicitud</th>

                                        </tr>
                                    </thead>
                                   <tbody>
                                        {% for programa in solicitar_apoyo %}
                                        <tr>
                                            <!-- <td> {{ programa.id}} </td> -->
                                            <td>
                                                {{ programa.folio }}
                                            </td>
                                            <td>{{ programa.rfc }}</td>
                                            <td>{{ programa.nombre }}</td>
                                            <td>{{ programa.programa }}</td>
                                            <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td>
                                            <td>
                                                {{ programa.estatus }}
                                            </td>
                                            <td>
                                                {% if programa.estatus == 'SOLICITAR APOYO' %}
                                                <button id="btCancel"
                                                    onclick="Rechazar_Modal('{% url 'programacion_app:alta-detalle' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}', '{{ programa.estatus }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Rechazar" class="btn btn-warning btn-sm" target="_blank">
                                                    <i class="fa fa-mail-reply"></i>
                                                </button>
                                                {% endif %}
                                                <button id="btDetail" onclick="View_Modal('{% url 'programacion_app:ver-todo' programa.id %}')"
                                                    data-toggle="tooltip" data-placement="top" title="Detalle" class="btn btn-warning btn-sm" target="_blank"><i
                                                        class="fa fa-list-ul"></i> </button>
                                            
                                                <button id="btSolicitar"
                                                    onclick="Solicitar_Modal('{% url 'programacion_app:alta-solicitud' programa.id %}', '{{ programa.id }}', '{{ programa.folio }}', '{{ programa.estatus }}')"
                                                    data-toggle="tooltip" data-placement="top" title="Solicitar" class="btn btn-primary btn-sm" target="_blank">
                                                    <i class="fa fa-paper-plane"></i>
                                                </button>
                                            </td>

                                        </tr>
                                        {% endfor %}
                                    </tbody>

                                </table>
                            </div>

                        </div>
						
						<div class="tab-pane fade" id="profile-50" role="tabpanel" aria-labelledby="profile-50-tab">
							<div class="table-responsive">
                                <table id="datatable4" class="table table-striped table-bordered p-0">
                                    <thead>
                                        <tr>
                                            <!-- <th>
                                    <input type="checkbox" name="select_all" value="1" id="example-select-all">
                                </th> -->
                                            <th>Oficio</th>
                                            <th>RFC</th>
                                            <th>Nombre</th>
                                            <th>Programa</th>
                                            <th>Fecha Creación</th>
                                            <th>Etapa</th>
											<th>Seguimiento</th>
											<th>Reasignar</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for programa in reasignar %}
                                        <tr>
                                            <!-- <td> {{ programa.id}} </td> -->
                                            <td>
                                                
                                                {{ programa.folio }}
                                                
                                            </td>
                                            <td>{{ programa.rfc }}</td>
                                            <td>{{ programa.nombre }}</td>
                                            <td>{{ programa.programa }}</td>
                                            <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td>
                                            <td>
                                                {{ programa.estatus }}
                                            </td>
											<td>{% get_user_info programa.seguimiento %}</td>
											<td>
											
												<button id="btReasignar"
                                                    onclick="Reasignar_Modal('{% url 'programacion_app:reasignar' %}', '{{ programa.id }}', '{{ programa.seguimiento }}', '{{programa.folio}}');"
                                                    data-toggle="tooltip" data-placement="top" title="Reasignar"
                                                    class="btn btn-primary btn-sm" target="_blank"><i class="fa fa-refresh"></i> <i class="fa fa-user-o"></i>
                                                </button>
												
												
											</td>

                                        </tr>
                                        {% endfor %}
                                    </tbody>

                                </table>
                            </div>
						
						
						</div>
						
						<div class="tab-pane fade" id="profile-60" role="tabpanel" aria-labelledby="profile-60-tab">
                            <div class="table-responsive">
                                <!-- <table id="datatable5" class="table table-striped table-bordered p-0"> -->
                                    <!-- <thead> -->
                                        <!-- <tr> -->
                                           
                                            <!-- <th>Oficio</th> -->
                                            <!-- <th>RFC</th> -->
                                            <!-- <th>Nombre</th> -->
                                            <!-- <th>Programa</th> -->
                                            <!-- <th>Fecha Creación</th> -->
                                            <!-- <th>Etapa</th> -->
                                            <!-- <th>Detalle</th> -->
                                        <!-- </tr> -->
                                    <!-- </thead> -->
                                    <!-- <tbody> -->
                                        <!-- {% for programa in informativas %} -->
                                        <!-- <tr> -->
                                            <!-- <td> -->
                                                <!-- {% if programa.folio %} -->
													<!-- {{ programa.folio }} -->
                                                <!-- {% else %} -->
													<!-- {{ programa.id }} -->
                                                <!-- {% endif %} -->
                                            <!-- </td> -->
                                            <!-- <td>{{ programa.rfc }}</td> -->
                                            <!-- <td>{{ programa.nombre }}</td> -->
                                            <!-- <td>{{ programa.programa }}</td> -->
                                            <!-- <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td> -->
                                            <!-- <td> -->
                                                <!-- {{ programa.estatus }} -->
                                            <!-- </td> -->
                                            <!-- <td> -->
                                                <!-- <button id="btDetail" -->
                                                    <!-- onclick="View_Modal('{% url 'programacion_app:ver-autorizacion' programa.id %}')" -->
                                                    <!-- data-toggle="tooltip" data-placement="top" title="Detalle" -->
                                                    <!-- class="btn btn-warning btn-sm" target="_blank"><i -->
                                                        <!-- class="fa fa-list-ul"></i> -->
                                                <!-- </button>                                                 -->
                                            <!-- </td> -->
                                        <!-- </tr> -->
                                        <!-- {% endfor %} -->
                                    <!-- </tbody> -->

                                <!-- </table> -->
                            </div>

                        </div>
						
						<div class="tab-pane fade" id="profile-70" role="tabpanel" aria-labelledby="profile-70-tab">
                            <div class="table-responsive">
                                <table id="datatable6" class="table table-striped table-bordered p-0">
                                    <thead>
                                        <tr>
                                           
                                            <th>Oficio</th>
                                            <th>RFC</th>
                                            <th>Nombre</th>
                                            <th>Programa</th>
                                            <th>Fecha Creación</th>
                                            <th>Etapa</th>
                                            <th>Detalle</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for programa in canceladas %}
                                        <tr>
                                            <td>
                                                {% if programa.folio %}
													{{ programa.folio }}
                                                {% else %}
													{{ programa.id }}
                                                {% endif %}
                                            </td>
                                            <td>{{ programa.rfc }}</td>
                                            <td>{{ programa.nombre }}</td>
                                            <td>{{ programa.programa }}</td>
                                            <td><span class="sp_date">{{ programa.fecha|date:'Y/m/d' }}</span> {{programa.fecha|date:'d/m/Y' }}</td>
                                            <td>
                                                {{ programa.estatus }}
                                            </td>
                                            <td>
                                                <button id="btDetail"
                                                    onclick="View_Modal('{% url 'programacion_app:ver-autorizacion' programa.id %}')"
                                                    data-toggle="tooltip" data-placement="top" title="Detalle"
                                                    class="btn btn-warning btn-sm" target="_blank"><i
                                                        class="fa fa-list-ul"></i>
                                                </button>                                                
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>

                                </table>
                            </div>

                        </div>


                    </div>



                </div>
            </div>
        </div>
    </div>
 </div>

<!-- Modal View -->
<div class="modal fade" id="mdView" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Add -->
<div class="modal fade" id="mdCreate" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Detail -->
<div class="modal fade" id="mdDetail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Detail -->
<div class="modal fade" id="mdReject" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Close -->
<div class="modal fade" id="mdCerrar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Reporte -->
<div class="modal fade" id="mdUpdate" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Reporte -->
<div class="modal fade" id="mdPublish" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">    
</div>

<!-- Modal Reporte -->
<div class="modal fade" id="mdReasignar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">    
</div>

<!-- Modal Files -->
<div class="modal fade" id="mdFiles" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>

<!-- Modal Update Files -->
<div class="modal fade" id="mdUpdate_Files" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
</div>

{% endblock content %}

{% block extrajs %}
<script src="{% static 'js/bootstrap-datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/bootstrap-datatables/dataTables.bootstrap4.min.js' %}"></script>

<script>
    $(document).ready(function () {

		$('.sp_date').hide();
        $('.alert-success').fadeOut(6000);

		var table = $('#datatable1').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            // columnDefs: [{
            //     'targets': 0,
            //     'visible': true,
            //     'searchable': false,
            //     'orderable': false,
            //     'className': 'dt-body-center',
            //     'render': function (data, type, full, meta){
            //         return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
            //     }
            // }],
            "order": [[ 0, 'desc' ]]
            

        });
		
		var table2 = $('#datatable2').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            // columnDefs: [{
            //     'targets': 0,
            //     'visible': true,
            //     'searchable': false,
            //     'orderable': false,
            //     'className': 'dt-body-center',
            //     'render': function (data, type, full, meta){
            //         return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
            //     }
            // }],
            "order": [[ 0, 'desc' ]]
            

        });
		
		var table3 = $('#datatable3').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            // columnDefs: [{
            //     'targets': 0,
            //     'visible': true,
            //     'searchable': false,
            //     'orderable': false,
            //     'className': 'dt-body-center',
            //     'render': function (data, type, full, meta){
            //         return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
            //     }
            // }],
            "order": [[ 0, 'desc' ]]
            

        });
		
		var table4 = $('#datatable4').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            // columnDefs: [{
            //     'targets': 0,
            //     'visible': true,
            //     'searchable': false,
            //     'orderable': false,
            //     'className': 'dt-body-center',
            //     'render': function (data, type, full, meta){
            //         return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
            //     }
            // }],
            "order": [[ 0, 'desc' ]]
            

        });
		
		var table5 = $('#datatable5').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            "order": [[ 0, 'desc' ]]
            

        });
		
		var table6 = $('#datatable6').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            "order": [[ 0, 'desc' ]]
            

        });
		
		var table2 = $('#datatable8').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "No hay información",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Ultimo",
                    "next": ">",
                    "previous": "<"
                }
            },
            // columnDefs: [{
            //     'targets': 0,
            //     'visible': true,
            //     'searchable': false,
            //     'orderable': false,
            //     'className': 'dt-body-center',
            //     'render': function (data, type, full, meta){
            //         return '<input type="checkbox" name="id[]" value="' + $('<div/>').text(data).html() + '">';
            //     }
            // }],
            "order": [[ 0, 'desc' ]]
            

        });
		
       

		var get_folio = '';
        //get_folio = {{ request.session.folio }};

        if(get_folio!==''){
			swal({
				title: 'Se genero Folio:',
				text: 'test'
			})
		}
        
    });

    function View_Modal(myURL) {
        $('#mdView').load(myURL, function () {
            $(this).modal('show');
        });
    }


    function Add_Modal(myURL) {
        $('#mdCreate').load(myURL, function () {

            $('#id_fecha').hide();

            $('.date-picker-default').datepicker({ 
                format: 'dd/mm/yyyy' 
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");

            $(this).modal('show');

        });
    }


    function Detail_Modal(myURL, myID) {
        $('#mdDetail').load(myURL, function () {

            $('#id_programa_id').val(myID);

            $('.date-picker-default').datepicker({ 
                format: 'dd/mm/yyyy' 
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");

            $(this).modal('show');

        });
    }
	
	function Rechazar_Modal(myURL, myID, myFolio, myStatus) {
        $('#mdReject').load(myURL, function () {
            if(myStatus == 'PARA TRANSFERIR' | myStatus == 'PAGO TOTAL'){
                $('#id_estatus option[value="39"]').remove();
			    $('#id_estatus option[value="40"]').remove();
                $('#id_estatus option[value="72"]').remove();
            }
			if(myStatus == 'SOLICITAR APOYO'){
                //$('#id_estatus option[value="39"]').remove();
			    //$('#id_estatus option[value="40"]').remove();
                $('#id_estatus option[value="72"]').remove();
            }
			
            var entries = 'Oficio: ' + myFolio;
            $("#lbSelected2").html(entries);
            
            $("#lbTitle").html("Rechazar");
            $("#btReject").html("Rechazar");
            $('#id_comentarios').attr('required', true);

            $("#id_programa_id option[value='" + myID + "']").attr('selected', 'selected');
            $("#id_programa_id").hide();

            $('#tbID1').hide();
            $('#id_fecha').hide();
            $('#id_etapa').hide();
            $('#lbFecha').hide();
            $('#lbEtapa').hide();
            $('#lbOficio').hide();

            $('.date-picker-default').datepicker({
                format: 'dd/mm/yyyy'
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");

            $(this).modal('show');
        });
    }


    function Cancel_Modal(myURL, myID, myFolio) {
        $('#mdDetail').load(myURL, function () {
		
			$('#id_estatus option[value="39"]').remove();
			$('#id_estatus option[value="40"]').remove();
			$('#id_estatus option[value="88"]').remove();
			//$("select[name='estatus'] option[value='39']").hide();
			//$("select[name='estatus'] option[value='40']").hide();

            var entries = 'Oficio: ' + myID;
            $("#lbSelected2").html(entries);
            //$('.md-detalle').addClass('modal-sm');
            //$('#btReject').attr('value','Rechazar');
            $("#lbTitle").html("Rechazar");
            $("#btReject").html("Rechazar");
            $('#id_comentarios').attr('required', true);

            $("#id_programa_id option[value='" + myID + "']").attr('selected', 'selected');
            $("#id_programa_id").hide();

            $('#tbID1').hide();
            $('#id_fecha').hide();
            $('#id_etapa').hide();
            $('#lbFecha').hide();
            $('#lbEtapa').hide();
            $('#lbOficio').hide();

            $('.date-picker-default').datepicker({
                format: 'dd/mm/yyyy'
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");

            $(this).modal('show');
        });
    }
	
	function Cerrar_Modal(myURL, myID, myFolio, myStatus) {

        $('#mdCerrar').load(myURL, function () {

            if(myStatus == 'PARA TRANSFERIR' | myStatus == 'RECHAZADO'){
                $('#id_estatus option[value="39"]').remove();
            }else{
                $('#id_estatus option[value="40"]').remove();
            }
			
			if(myStatus == 'SOLICITAR APOYO'){
				$('#lbEstatus').hide();
				$('#id_estatus').hide();
            }
		
            var entries = 'Oficio: ' + myFolio;
            $("#lbSelected4").html(entries);
            

            $("#id_programa_id option[value='" + myID + "']").attr('selected', 'selected');
            $("#id_programa_id").hide();

            $('#tbID4').hide();
            $('#id_fecha').hide();
            
            $('#lbFecha2').hide();
            
            $('#lbOficio2').hide();

            $('.date-picker-default').datepicker({
                format: 'dd/mm/yyyy'
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");
			
			

            $(this).modal('show');
        });
    }
	
	function Solicitar_Modal(myURL, myID, myFolio, myStatus) {

        $('#mdCerrar').load(myURL, function () {

            var entries = myFolio;
            $("#lbOficio10").html(entries);
            

            $("#id_programa_id option[value='" + myID + "']").attr('selected', 'selected');
            $("#id_programa_id").hide();

            $('#id_fecha').hide();
			$('#lbFecha2').hide();
                        
            $('.date-picker-default').datepicker({
                format: 'dd/mm/yyyy'
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");
			

            $(this).modal('show');
        });
    }



    function Update_Modal(myURL, myID) {
        $('#mdUpdate').load(myURL, function () {

            var value = $('#hfProgram').val();
            $("#id_programa option[value='" + value + "']").attr('selected','selected');

            $('#id_folio').prop('readonly', 'readonly');
            $('#id_folio').hide();

            $('.date-picker-default').datepicker({ 
                format: 'dd/mm/yyyy' 
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");

            $(this).modal('show');

        });
    }

    function Publish_Modal(myURL, myList, myStatus, myFolio, myFlag, myRFC) {
			var RFC = myRFC; 
            var path = "{% url 'rec_app:get-fiscalizados' 'RFC' %}";
			
			$.ajax({
                url: path.replace('RFC', RFC), 
                type: "GET", 
                dataType: "JSON", 
                success: function (data) { 
                    
                   
					if (data[0]){ 
						var rfc_ = data[0].fields.rfc; 
						
						swal({
							title: 'Este RFC necesita autorizacion:',
							text: rfc_ 
						}) 
					} 
                   
                }, 
                error: function (error) { 

					console.log(error);
                } 
			});
            
			
        $('#mdPublish').load(myURL, function () {
            
            if(myFolio==''){
                var entries = 'Oficio: ' + myList;
            }else{
                var entries = myFolio;
            }
			$("#lbSelected").html(entries);

            $("#id_lista").val(myList);

            if(myStatus.indexOf("RECHAZADA") > 0){
        
                $('#lbCmmt').show();
                $('#id_observaciones').attr('required', true);
                $('#id_observaciones').show();

                $('#id_seguimiento').hide();
                $('#lbAsignar').hide();

            }else if(myStatus == "OFICIO" || myFlag == 1){
                $('#lbAsignar').show();
                $('#id_seguimiento').show();

                $('#lbCmmt').hide();
                $('#id_observaciones').hide();  
            }else{
                $('#id_observaciones').attr('required', false);
                $('#id_observaciones').hide();

                $('#lbCmmt').hide();
                $('#id_seguimiento').hide();
                $('#lbAsignar').hide();
            }
                   
            $(this).modal('show');
        });
    }
	
	function Reasignar_Modal(myURL, myList, myUser, myFolio) {
        $('#mdReasignar').load(myURL, function () {
            
            if(myFolio==''){
                var entries = 'Oficio: ' + myList;
            }else{
                var entries = myFolio;
            }
			$("#lbSelected3").html(entries);

            $("#id_lista").val(myList);
			$("#id_seguimiento option:contains('" + myUser + "')").attr('selected','selected');
           
            $(this).modal('show');
        });
    }
    
    function Files_Modal(myURL, myID, myFolio) {
        $('#mdFiles').load(myURL, function () {

            $("#id_programa_id option[value='" + myID + "']").attr('selected', 'selected');
            $("#id_programa_id").hide();

            $('#tbID2').val(myFolio);
            $('#tbID2').prop('disabled', 'disabled');

            $('.date-picker-default').datepicker({
                format: 'dd/mm/yyyy'
            });
            $('.date-picker-default').css("background-color", "#f6f7f8");

            $(this).modal('show');
        });
    }

</script>

{% endblock extrajs %}